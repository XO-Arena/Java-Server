<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<BorderPane xmlns="http://javafx.com/javafx/17" stylesheets="@/styles/server-ui.css" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.mycompany.java.server.project.ServerController" prefHeight="650.0" prefWidth="950.0" styleClass="root">
    
    <!-- Top: Control Panel -->
    <top>
        <VBox spacing="12" styleClass="top-panel">
            <HBox alignment="CENTER_LEFT" spacing="15">
                <Label text="Server Control Panel" styleClass="main-title"/>
            </HBox>
            
            <!-- Control Buttons -->
            <HBox spacing="15" alignment="CENTER_LEFT">
                <Button fx:id="startButton" text="▶ Start Server" onAction="#handleStart" 
                        styleClass="btn-start"/>
                
                <Button fx:id="stopButton" text="■ Stop Server" onAction="#handleStop"
                        styleClass="btn-stop"/>
               
                <HBox spacing="10" alignment="CENTER" styleClass="status-container">
                    <Label text="●" fx:id="statusIndicator" styleClass="status-dot"/>
                    <Label fx:id="statusLabel" text="Offline" styleClass="status-text"/>
                </HBox>
            </HBox>
        </VBox>
    </top>
    
    <!-- Center: Stats and Chart -->
    <center>
        <HBox spacing="12" styleClass="center-container">
            <!-- Left Side: Stats Cards -->
            <VBox spacing="20" HBox.hgrow="SOMETIMES">
                <!-- Online Users Card -->
                <VBox spacing="8" alignment="CENTER" styleClass="stat-card card-online">
                    <HBox spacing="8" alignment="CENTER">
                        <Label text="●" styleClass="card-dot dot-online"/>
                        <Label text="Online Users" styleClass="card-label"/>
                    </HBox>
                    <Label fx:id="onlineCountLabel" text="0" styleClass="value-online"/>
                    <Label text="Active Connections" styleClass="card-subtitle"/>
                </VBox>
                
                <!-- Offline Users Card -->
                <VBox spacing="8" alignment="CENTER" styleClass="stat-card card-offline">
                    <HBox spacing="8" alignment="CENTER">
                        <Label text="●" styleClass="card-dot dot-offline"/>
                        <Label text="Offline Users" styleClass="card-label"/>
                    </HBox>
                    <Label fx:id="offlineCountLabel" text="0" styleClass="value-offline"/>
                    <Label text="Disconnected" styleClass="card-subtitle"/>
                </VBox>
                
                <!-- Total Users Card -->
                <VBox spacing="8" alignment="CENTER" styleClass="stat-card card-total">
                    <HBox spacing="8" alignment="CENTER">
                        <Label text="●" styleClass="card-emoji"/>
                        <Label text="Total Users" styleClass="card-label"/>
                    </HBox>
                    <Label fx:id="totalCountLabel" text="0" styleClass="value-total"/>
                    <Label text="Registered" styleClass="card-subtitle"/>
                </VBox>
            </VBox>
            
            <!-- Right Side: Pie Chart -->
            <VBox spacing="15" HBox.hgrow="ALWAYS" styleClass="chart-container">
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label text="User Distribution" styleClass="chart-title"/>
                </HBox>
                <PieChart fx:id="usersPieChart" 
                          minHeight="350" 
                          prefHeight="400"
                          styleClass="pie-chart"/>
            </VBox>
        </HBox>
    </center>
    
    <padding>
        <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
    </padding>
</BorderPane>